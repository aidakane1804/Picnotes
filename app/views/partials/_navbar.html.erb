<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarTogglerDemo02"
      aria-controls="navbarTogglerDemo02"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <%= link_to 'About Us', about_us_path, class: 'nav-link', aria: {
          current: 'page' }%>
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            href="<%= explore_path %>"
            style="margin-left: 0.5%"
            >Explore</a
          >
        </li>
        <li class="nav-item">
          <%= link_to 'EdFluencers', edfluencers_path, class: 'nav-link', aria:
          { current: 'page' }, style: 'margin-left: 0.5%;' %>
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            href="<%= trending_path %>"
            style="margin-left: 0.5%"
            >Trending</a
          >
        </li>
      </ul>
      <div class="logo-container">
        <%= link_to root_path do %> <%= image_tag 'logo.png', class: 'nav-logo',
        style: 'margin-left: 0.5%;' %> <% end %>
      </div>
      <form id="search-form" action="<%= root_path %>" method="get">
        <%= text_field_tag :search, params[:search], placeholder: "Search here",
        id: "search-user", class: "form-control" %>
        <div
          class="search-icon"
          onclick="document.getElementById('search-user').form.submit();"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="15"
            height="15"
            viewBox="0 0 50 50"
          >
            <path
              d="M 21 3 C 11.622998 3 4 10.623005 4 20 C 4 29.376995 11.622998 37 21 37 C 24.712383 37 28.139151 35.791079 30.9375 33.765625 L 44.085938 46.914062 L 46.914062 44.085938 L 33.886719 31.058594 C 36.443536 28.083 38 24.223631 38 20 C 38 10.623005 30.377002 3 21 3 z M 21 5 C 29.296122 5 36 11.703883 36 20 C 36 28.296117 29.296122 35 21 35 C 12.703878 35 6 28.296117 6 20 C 6 11.703883 12.703878 5 21 5 z"
            ></path>
          </svg>
        </div>
      </form>

      <div class="auth-buttons">
        <a class="login-button" href="<%= new_session_path %>">Log in</a>
        <%= button_to new_user_path, method: :get, class: "sign-up-button", style: "margin-left:12%; margin-top:9%;" do %>
        <svg
          width="22"
          viewBox="0 0 16 16"
          class="bi bi-person-circle"
          fill="currentColor"
        >
          <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
          <path
            fill-rule="evenodd"
            d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"
          />
        </svg>
        <span>Sign up </span>
        <% end %>
      </div>
      <div class="hamburger-menu">
        <input id="menu__toggle" type="checkbox"/>
        <label class="menu__btn" for="menu__toggle">
          <span></span>
        </label>
        <ul class="menu__box">
          <li><a class="menu__item" href="/guidelines">Guidelines</a></li>
          <li><a class="menu__item" href="/terms-and-conditions">Terms and Conditions</a></li>
          <li><a class="menu__item" href="/notes/contact_us">Contact Us</a></li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<link
  href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  rel="stylesheet"
/>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<style>
  .hamburger-menu {
  right: 30px;
  z-index: 100; /* Increase z-index to ensure visibility */
  margin-top: 9px;
  position: relative;
}
.hamburger-menu #menu__toggle {
  opacity: 0;
  position: absolute;
  width: 24px;
  height: 23px;
}

.navbar-nav .nav-link {
  margin-right: 0 !important;
}

  .hamburger-menu #menu__toggle:checked ~ .menu__btn > span {
    transform: rotate(45deg);
  }
  .hamburger-menu #menu__toggle:checked ~ .menu__btn > span::before {
    top: 0;
    transform: rotate(0);
  }
  .hamburger-menu #menu__toggle:checked ~ .menu__btn > span::after {
    top: 0;
    transform: rotate(90deg);
  }
  .hamburger-menu #menu__toggle:checked ~ .menu__box {
    visibility: visible;
    left: auto;
    right: -40px;
    z-index: 99999;
  }
  .hamburger-menu .menu__btn {
    display: none;
    right: 0;
  }

  .hamburger-menu #menu__toggle:checked ~ .menu__btn > span {
    transform: rotate(45deg);
  }
  .hamburger-menu #menu__toggle:checked ~ .menu__btn > span::before {
    top: 0;
    transform: rotate(0);
  }
  .hamburger-menu #menu__toggle:checked ~ .menu__btn > span::after {
    top: 0;
    transform: rotate(90deg);
  }
  .hamburger-menu #menu__toggle:checked ~ .menu__box {
    visibility: visible;
    left: auto;
    right: -40px;
    z-index: 99999;
  }

  .hamburger-menu .menu__btn {
  display: flex;
  align-items: center;
  position: absolute;
  top: 34px;
  left: auto;
  width: 24px;
  height: 23px;
  cursor: pointer;
  z-index: 100; /* Ensure button is clickable and visible */
  margin-right: 30px;
}

  .menu__btn > span,
  .menu__btn > span::before,
  .menu__btn > span::after {
    display: block;
    position: absolute;
    width: 100%;
    height: 2px;
    background-color: #616161;
    transition-duration: 0.25s;
  }
  .menu__btn > span::before {
    content: "";
    top: -8px;
  }
  .menu__btn > span::after {
    content: "";
    top: 8px;
  }

  .hamburger-menu #menu__toggle:checked ~ .menu__box {
    visibility: visible;
    left: auto;
    right: -40px;
    z-index: 99999;
  }

  .menu__box {
    display: block;
    visibility: hidden;
    top: 68px;
    left: -100%;
    margin: 0;
    padding: 7px 0;
    list-style: none;
    background-color: whitesmoke;
    box-shadow: 1px 0px 6px rgba(0, 0, 0, 0.2);
    transition-duration: 0.25s;
    position: absolute;
    height: 98px;
    border-radius: 8px;
    margin-right: 46px;
  }
  .menu__box:before {
    content: "";
    height: 20px;
    width: 20px;
    background: whitesmoke;
    position: absolute;
    z-index: 999;
    top: -8px;
    right: 26px;
    margin: 0 auto;
    transform: rotate(45deg);
  }
  .hamburger-menu #menu__toggle:checked ~ .menu__box li {
    padding: 4px 7px;
  }

  .menu__item {
    color: #302f2fb5;
    text-align: center;
    padding: 0px 6px;
    text-decoration: none;
    font-size: 16px;
    display: table-footer-group;
    text-align: left;
  }
  .menu__item:hover {
    font-size: 16px;
    color: #000;
    text-decoration: none;
  }

  @media (min-width: 767px) and (max-width: 1200px) {
    .menu__box {
      top: 34px;
    }
    .navbar {
      flex-wrap: nowrap !important;
      padding: 0.2rem 1rem !important;
    }
    .tablate-navbar-container {
      display: block;
    }
    .hide-in-tablate {
      display: none !important;
    }
    .tablate-view-header {
      display: flex;
      width: 100%;
    }

    .navbar-expand-lg .navbar-collapse.hide-in-tablate-view {
      display: none !important;
    }

    .tablate-right-nav {
      position: absolute;
      right: 0;
      top: 0;
    }
    .tablate-view-btns button.btn-login {
      margin-top: 16px;
    }
    .tablate-right-nav .hamburger-menu {
      position: absolute;
      right: 0;
      top: 15px;
    }
    .hamburger-menu .menu__btn {
      top: 0px;
    }
    .btn-signup {
      margin-left: 10px;
      margin-right: 20px;
    }
    .navbar-nav a {
      padding: 15px;
      font-size: 14px !important;
    }
    .navbar-nav .nav-link {
      padding-left: 15px !important;
      padding-right: 15px !important;
    }
  }

  .rotated-image {
    transform: rotate(20deg);
  }

  .nav-link {
    margin-left: 20px;
    font-family: "Roboto !important;";
    font-weight: 400;
    line-height: 21.6px;
    font-size: 18px;
    color: #3f3f3f;
  }

  .nav-logo {
    width: 100%;
    height: 100%;
  }

  /* Style for search input */
  #search-form {
    margin-right: 1%;
    position: relative;
    display: flex; /* Use flexbox to align items */
    align-items: center;
    margin-top: 8px; /* Adjust this value to shift the search bar down */
  }

  .form-control {
    flex: 1; /* Allow the input to grow and shrink as needed */
    padding-right: 2.5rem; /* Space for the icon */
    border-radius: 20px;
    border: 1px solid #ccc;
    outline: none;
    background-color: #f5f5f5;
  }

  .search-icon {
    position: absolute;
    right: 0.5rem; /* Space between the icon and the input's right edge */
    top: 50%; /* Center the icon vertically */
    transform: translateY(-50%); /* Adjust for vertical centering */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }

  .search-icon svg {
    width: 15px;
    height: 15px;
  }

  /* Container for positioning */
  .position-relative {
    position: relative;
    width: 100%;
  }

  @media (max-width: 767px) {
    #search-form {
      margin-top: 10px; /* Less margin on smaller screens if needed */
    }

    .form-control {
      width: 100%; /* Full width on small screens */
      padding-right: 3rem; /* Increase padding for larger icon space */
    }
  }
  @media (max-width: 767.98px) {
    .search-input {
      width: calc(100% - 2.5rem);
    }
  }

  .auth-buttons {
    display: flex;
    align-items: center;
    margin-right: 2rem !important;
  }

  .login-button {
    margin-top: 8%;
    font-size: 20px;
    font-family: "Roboto !important;";
    text-decoration: none;
    color: #bc171d;
    margin-bottom: 0px;
    margin-left: 1%;
  }

  .sign-up-button {
    background-color: #bc171d;
    border: none;
    color: white;
    text-align: center;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 50px;
    width: 100%;
    font-family: "Roboto !important;";
    padding: 10px 18px;
  }

  @media (max-width: 767.98px) {
    .navbar-nav {
      text-align: center;
    }
    .logo-container {
      position: static;
      transform: none;
      margin: 0 auto 10px;
    }
    .search-input {
      width: calc(100% - 30px);
    }
    .hamburger-menu {
      display: block;
    }
  }

  /* Additional Styles */
  .btn-custom {
    background-color: #ffffff;
    color: #bc171d;
  }

  .btn-custom:hover {
    background-color: #bc171d;
    color: #ffffff;
  }

  .card-section {
    background-color: #bc171d1a;
    font-family: Arial, sans-serif;
  }

  .oval-input {
    border-radius: 50px;
    padding: 10px 15px;
    border: 1px solid #ccc;
    width: 100%;
    max-width: 365px;
    height: 48px;
  }

  #search-user{
    width: 20rem !important;
    height: 3rem !important;
    border-radius: 30px !important;
    background-color: #F5F5F5 !important;
  }

  .search-icon {
    margin-right: -4px !important;
  }

  .search-icon svg {
    width: 27px !important;
    height: 27px !important;
  }
</style>

<script>
  $(document).ready(function () {
    $("#search-user").on("input", function () {
      var search_val = $(this).val();
      clearTimeout(window.searchTimeout);
      window.searchTimeout = setTimeout(function () {
        $.ajax({
          type: "GET",
          url: $("#search-form").attr("action"),
          data: { search: search_val },
          success: function (result) {
            $("#search-result").html(result);
          },
          error: function () {
            console.error("Search failed.");
          },
        });
      }, 300);
    });

    $("#search-form")
      .on("ajax:success", function (event) {
        const [data] = event.detail;
        $("#search-results").html(data.search_results);
        $("#notes-list").html(data.notes_list);
      })
      .on("ajax:error", function (event) {
        console.error("Search failed:", event.detail);
      });

    $(".first-button").on("click", function () {
      $(".animated-icon1").toggleClass("open");
    });
  });
</script>
